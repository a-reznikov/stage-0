(()=>{"use strict";const e=[{title:"Jacobs theme",src:"src/assets/sounds/Jacobs_theme_zatmenie.mp3"},{title:"The road goes ever",src:"src/assets/sounds/The_road_goes_ever.mp3"},{title:"Fellowship of the ring",src:"src/assets/sounds/Fellowship_of_the_ring.mp3"},{title:"Concerning hobbits",src:"src/assets/sounds/Concerning_hobbits.mp3"}],t=["en"],n=["github"],o=["time","date","greeting-container","qoute-container","weather","player","links"],c={nameLinks:[],hrefLinks:[]},r=document.querySelector(".time"),a=document.querySelector(".date"),s=document.querySelector(".greeting"),l=document.querySelector(".name"),i=document.querySelector("body"),u=document.querySelector(".slide-next"),d=document.querySelector(".slide-prev"),m=document.querySelector(".teg__photos");let h=t[0],g=`${h}-${h.charAt(0).toUpperCase()+h.slice(1)}`,p=n[0],y="",k="";function f(){const e=new Date,t=e.toLocaleTimeString(),n=e.toLocaleDateString(`${g}`,{weekday:"long",month:"long",day:"numeric"});r.textContent=t,a.textContent=n,S(),setTimeout(f,1e3)}function S(){const e=(new Date).getHours();let t="";switch(Math.floor(e/6)){case 1:return t="morning",t;case 2:return t="afternoon",t;case 3:return t="evening",t;case 0:return t="night",t}}function L(){if("en"===h)y="Wind speed: ",k="Humidity: ",s.textContent=`Good ${S()}`,l.placeholder="Enter your name...",m.placeholder="tag search...";else if("ru"===h)switch(y="Скорость ветра: ",k="Влажность: ",l.placeholder="Введите Ваше имя...",m.placeholder="поиск по тегу...",`${S()}`){case"morning":return s.textContent="Доброе утро",s;case"afternoon":return s.textContent="Добрый день",s;case"evening":return s.textContent="Добрый вечер",s;case"night":return s.textContent="Доброй ночи",s}}f(),L();let C=Math.floor(20*Math.random()+1);function q(e){return String(e).length<2?(C=String("0"+e),C):C}function x(e){const t=new Image;if("unsplash"===p)fetch(`https://api.unsplash.com/photos/random?orientation=landscape&query=${e}&client_id=rFNda98nRaQNNJVmFzvMRRIsiJfFl0KTXe4vLdcd-Ik`).then((e=>e.json())).then((e=>{t.src=e.urls.regular,t.onload=()=>{i.style.backgroundImage=`url('${t.src}')`}}));else if("flickr"===p){const n=[];fetch(`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=e75103dd642cdbd338bfce618d58606e&tags=${e}&extras=url_h&format=json&nojsoncallback=1`).then((e=>e.json())).then((e=>{e.photos.photo.forEach((e=>{e.width_h>e.height_h&&""!==e.url_h&&n.push(e.url_h)}));let o=Math.floor(Math.random()*n.length+1);t.src=n[o],t.onload=()=>{i.style.backgroundImage=`url('${t.src}')`}}))}}function _(e,t){const n=new Image;n.src=`https://raw.githubusercontent.com/a-reznikov/backgrounds/assets/images/${e}/${t}.jpg`,n.onload=()=>{i.style.backgroundImage=`url('https://raw.githubusercontent.com/a-reznikov/backgrounds/assets/images/${e}/${t}.jpg')`}}_(S(),q(C)),u.addEventListener("click",(function(){"github"===p?(C=Number(q(C))+1,C>20&&(C=1),_(S(),q(C))):Se()})),d.addEventListener("click",(function(){"github"===p?(C=Number(q(C))-1,C<1&&(C=20),_(S(),q(C))):Se()}));const v=document.querySelector(".weather-icon"),w=document.querySelector(".temperature"),E=document.querySelector(".weather-description"),b=document.querySelector(".wind"),$=document.querySelector(".humidity"),I=document.querySelector(".city");let A="m/s";async function M(){""===I.value&&(I.value="Minsk");const e=`https://api.openweathermap.org/data/2.5/weather?q=${I.value}&lang=${h}&appid=bc50cc0ba8db1784f2c3e644ffa70527&units=metric`,t=await fetch(e),n=await t.json();"404"===n.cod?(v.className="weather-icon owf",v.classList.add("owf-404"),E.textContent="",b.textContent="",$.textContent="","en"===h?w.textContent=`${n.message}`:"ru"===h&&(w.textContent="город не найден")):(v.className="weather-icon owf",v.classList.add(`owf-${n.weather[0].id}`),w.textContent=`${Math.round(n.main.temp)} °C`,E.textContent=n.weather[0].description,b.textContent=`${y}${Math.round(n.wind.speed)} ${A}`,$.textContent=`${k}${n.main.humidity} %`)}document.addEventListener("DOMContentLoaded",M),I.addEventListener("keypress",(function(e){"Enter"===e.code&&M()}));const N=document.querySelector(".quote"),T=document.querySelector(".author"),j=document.querySelector(".change-quote");async function D(){const e=`src/assets/quotes/quotes-${h}.json`,t=await fetch(e),n=await t.json();let o=Math.floor(99*Math.random());"ru"===h&&(o=Math.floor(19*Math.random())),N.textContent=n.quotes[o].quote,T.textContent=n.quotes[o].author}document.addEventListener("DOMContentLoaded",D),j.addEventListener("click",D);const O=document.querySelector(".player"),z=document.querySelector(".volume-line"),F=document.querySelector(".time-line"),G=document.querySelector(".time-progress"),H=document.querySelector(".current-time"),J=document.querySelector(".music-length");let R=document.querySelector(".play-list"),U=!1,W=0;e.forEach((e=>{const t=document.createElement("li"),n=document.createElement("button"),o=document.createElement("span");t.classList.add("play-item"),n.classList.add("play"),n.classList.add("player-icon"),n.classList.add("play-song"),o.classList.add("song-title-list"),o.textContent=e.title,R.append(t),t.append(n),t.append(o)}));const X=document.querySelector(".play"),P=document.querySelector(".play-prev"),Q=document.querySelector(".play-next"),V=document.querySelector(".music-play-now");document.querySelector(".song-title-list");let K=document.querySelectorAll(".play-item");document.querySelectorAll(".play-song");const B=new Audio;V.textContent="en"===h?"Music dont play now":"Музыка не воспроизводится";let Y=0,Z=0;function ee(){V.textContent=e[W].title;const t=K[Z].querySelector(".play-song");K[Z].classList.remove("play-item-now"),t.classList.remove("pause"),K[W].classList.add("play-item-now");const n=K[W].querySelector(".play-song");!1===U?(B.src=e[W].src,B.currentTime=Y,B.play(),n.classList.add("pause"),X.classList.add("pause"),U=!0):(Y=B.currentTime,B.pause(),n.classList.remove("pause"),X.classList.remove("pause"),U=!1)}let te=Array.prototype.slice.call(K);function ne(){Z=W,Y=0,W===e.length-1?W=0:W+=1,U=!1,ee()}te.forEach((e=>{e.addEventListener("click",(function(){Z=W,W=te.indexOf(e),Z===W?(Y=B.currentTime,ee()):(U=!1,Y=0,ee())}))}));const oe=O.querySelector(".volume");function ce(e){let t=Math.floor(e%60);return`${Math.floor(e/60)}:${String(t).padStart(2,0)}`}B.muted=!1,B.volume=.2,X.addEventListener("click",ee),P.addEventListener("click",(function(){Z=W,Y=0,0===W?W=e.length-1:W-=1,U=!1,ee()})),Q.addEventListener("click",ne),oe.addEventListener("click",(function(){!1===B.muted?(oe.classList.remove("ico-play"),oe.classList.add("ico-mute"),B.muted=!0):(oe.classList.remove("ico-mute"),oe.classList.add("ico-play"),B.muted=!1)})),z.addEventListener("click",(e=>{!function(e){const t=window.getComputedStyle(z).width,n=e.offsetX/parseInt(t);B.volume=n,O.querySelector(".volume-progress").style.width=100*n+"%"}(e)}),!1),F.addEventListener("click",(e=>{!function(e){const t=window.getComputedStyle(F).width,n=e.offsetX/parseInt(t)*B.duration;B.currentTime=n}(e)}),!1),setInterval((function(){G.style.width=B.currentTime/B.duration*100+"%",H.textContent=ce(B.currentTime),isNaN(B.duration)?J.textContent="0:00":J.textContent=ce(B.duration),B.currentTime===B.duration&&ne()}),250);const re=document.querySelector(".settings__ico"),ae=document.querySelector(".settings__container"),se=document.querySelectorAll(".checkbox"),le=document.querySelectorAll(".checkbox__lang"),ie=document.querySelectorAll(".checkbox__source"),ue=document.querySelectorAll(".options__list"),de=document.querySelectorAll(".setup");let me=["false"],he=[],ge=[];function pe(e){e.forEach((e=>{le.forEach((t=>{t.id===e?t.checked="checked":t.checked=!1}))}))}function ye(e){e.forEach((e=>{se.forEach((t=>{t.id===e&&(document.querySelector(`.${t.id}`).style.opacity=1,t.checked="checked",me.push(t.id))}))}))}function ke(){ae.classList.toggle("settings__opened")}function fe(e){e.forEach((e=>{ie.forEach((t=>{t.id===e?t.checked="checked":t.checked=!1}))}))}function Se(){"github"===p?(m.value="",_(S(),q(C))):("unsplash"===p||"flickr"===p)&&(""!==m.value?x(m.value):x(S()))}le.forEach((e=>{e.addEventListener("click",(function(){!0===e.checked?(le.forEach((e=>{e.checked=!1})),e.checked="checked",he[0]=e.id,h=he[0],g=`${h}-${h.charAt(0).toUpperCase()+h.slice(1)}`,lt()):e.checked="checked"}))})),de.forEach((e=>{e.addEventListener("click",(function(){de.forEach((e=>{e.classList.remove("selected")})),e.classList.toggle("selected"),ue.forEach((t=>{t.classList.contains(e.id)?t.classList.add("opened"):t.classList.remove("opened")}))}))})),se.forEach((e=>{e.addEventListener("click",(function(){me[0]=["true"];let t=document.querySelector(`.${e.id}`);e.checked?-1===me.indexOf(e.id)&&(me.push(e.id),t.style.opacity=1):-1!==me.indexOf(e.id)&&(me.splice(me.indexOf(e.id),1),t.style.opacity=0)}))})),ie.forEach((e=>{e.addEventListener("click",(function(){!0===e.checked?(ie.forEach((e=>{e.checked=!1})),e.checked="checked",ge[0]=e.id,p=ge[0],Se()):e.checked="checked"}))})),m.addEventListener("keypress",(function(e){"Enter"===e.code&&Se()})),U=!1;const Le=document.querySelector(".search-input"),Ce=document.querySelector(".links__title"),qe=document.querySelector(".links__container"),xe=document.querySelector(".new-links"),_e=document.querySelector(".add-links__container"),ve=document.querySelector(".search-logo"),we=document.querySelector(".chrome_tab"),Ee=document.querySelector(".apps"),be=document.querySelector(".button-back"),$e=document.querySelector(".create__link"),Ie=document.querySelector(".links__list"),Ae=document.querySelector(".input-links-name"),Me=document.querySelector(".input-links-link");let Ne=document.querySelectorAll(".links__item"),Te=document.querySelectorAll(".links__delete"),je=document.querySelectorAll(".links-item-href"),De={nameLinks:[],hrefLinks:[]};function Oe(){qe.classList.toggle("links__opened"),_e.classList.remove("add-links__opened")}function ze(){_e.classList.toggle("add-links__opened"),Ae.value="",Me.value=""}function Fe(e){e.nameLinks.forEach((t=>{const n=document.createElement("li"),o=document.createElement("a"),c=document.createElement("div");n.classList.add("links__item"),o.classList.add("links-item-href"),c.classList.add("links__delete"),o.textContent=t,o.href=`${e.hrefLinks[e.nameLinks.indexOf(t)]}`,o.target="_blank",Ie.append(n),n.append(o),n.append(c)}))}Le.addEventListener("keypress",(function(e){"Enter"===e.code&&(ve.classList.contains("yandex")?window.open(`https://yandex.ru/search/?text=${Le.value}`,"_blank"):window.open(`https://www.google.com/search?q=${Le.value}`,"_blank"))})),Ie.addEventListener("click",(function(e){"DIV"===e.target.nodeName&&(e.target.closest("li").remove(),je=document.querySelectorAll(".links-item-href"),De={nameLinks:[],hrefLinks:[]},je.forEach((e=>{De.nameLinks.push(`${e.textContent}`),De.hrefLinks.push(`${e.href}`)})))})),Array.prototype.slice.call(Te),window.addEventListener("click",(e=>{!function(e){let t=!1;!ae.classList.contains("settings__opened")||ae.contains(e.target)||re.contains(e.target)||ke(),Te.forEach((n=>{n.contains(e.target)&&(t=!0)})),!qe.classList.contains("links__opened")||qe.contains(e.target)||Ce.contains(e.target)||!1!==t||Oe()}(e)}),!1),Ce.addEventListener("click",Oe),xe.addEventListener("click",ze),ve.addEventListener("click",(function(){ve.classList.toggle("yandex")})),we.addEventListener("click",(function(){window.open("https://google.com/","_blank")})),Ee.addEventListener("click",(function(){window.open("https://chrome.google.com/webstore/","_blank")})),be.addEventListener("click",ze),$e.addEventListener("click",(function(){const e=document.createElement("li"),t=document.createElement("a"),n=document.createElement("div");e.classList.add("links__item"),t.classList.add("links-item-href"),n.classList.add("links__delete"),t.textContent=Ae.value,t.href=`${Me.value}`,t.target="_blank",Ie.append(e),e.append(t),e.append(n),De.nameLinks.push(`${Ae.value}`),De.hrefLinks.push(`${Me.value}`),Te=document.querySelectorAll(".links__delete"),ze()}));const Ge=document.querySelector(".setup__general"),He=document.querySelector(".setup__photos"),Je=document.querySelector(".setup__languages"),Re=document.querySelector(".option_general"),Ue=document.querySelector(".description_general"),We=document.querySelector(".action_general"),Xe=document.querySelector(".block-time"),Pe=document.querySelector(".block-date"),Qe=document.querySelector(".block-greeting"),Ve=document.querySelector(".block-quote"),Ke=document.querySelector(".block-weather"),Be=document.querySelector(".block-player"),Ye=document.querySelector(".block-links"),Ze=document.querySelector(".option_photos"),et=document.querySelector(".description_photos"),tt=document.querySelector(".action_photos"),nt=document.querySelector(".tag__title"),ot=document.querySelector(".option_languages"),ct=document.querySelector(".description_languages"),rt=document.querySelector(".action_languages"),at=document.querySelector(".links__name"),st=document.querySelector(".links__link");function lt(){"en"===h?(V.textContent="Music dont play now",Ce.textContent="Links",we.textContent="New tab",Ee.textContent="Webstore Chrome",xe.textContent="New Link",$e.textContent="Create",at.textContent="Name",st.textContent="Link",A="m/s","Минск"===I.value&&(I.value="Minsk")):"ru"===h&&(V.textContent="Музыка не воспроизводится",Ce.textContent="Ссылки",we.textContent="Новая вкладка",Ee.textContent="Интернет-магазин Chrome",xe.textContent="Новая ссылка",$e.textContent="Создать",at.textContent="Название",st.textContent="Ссылка",A="м/с","Minsk"===I.value&&(I.value="Минск")),L(),M(),f(),D(),"en"===h?(Ge.textContent="General",He.textContent="Photos",Je.textContent="Languages",Re.textContent="General",Ue.textContent="Customize your dashboard",We.textContent="Show:",Xe.textContent="Clock",Pe.textContent="Date",Qe.textContent="Greeting",Ve.textContent="Quotes",Ke.textContent="Weather",Be.textContent="Audio player",Ye.textContent="Links",Ze.textContent="Photos",et.textContent="Select a photo source",tt.textContent="Sources:",nt.textContent="Get photos by tag (only in English):",ot.textContent="Languages",ct.textContent="Available languages for the app",rt.textContent="Change:"):"ru"===h&&(Ge.textContent="Общие",He.textContent="Фото",Je.textContent="Язык",Re.textContent="Общие",Ue.textContent="Настройте свою информационную панель",We.textContent="Показать:",Xe.textContent="Часы",Pe.textContent="Дата",Qe.textContent="Приветствие",Ve.textContent="Цитаты",Ke.textContent="Погода",Be.textContent="Аудио плеер",Ye.textContent="Ссылки",Ze.textContent="Фото",et.textContent="Выберите источник фотографий",tt.textContent="Источники:",nt.textContent="Фотографий по тегам (только на английском языке):",ot.textContent="Язык",ct.textContent="Доступные языки для приложения",rt.textContent="Изменить:")}window.addEventListener("load",(function(){if(localStorage.getItem("name")&&(l.value=localStorage.getItem("name")),localStorage.getItem("city")&&(I.value=localStorage.getItem("city")),localStorage.getItem("tag")&&(m.value=localStorage.getItem("tag")),localStorage.getItem("setting")?ye(localStorage.getItem("setting").split(",").slice(1)):ye(o),localStorage.getItem("lang")){let e=localStorage.getItem("lang").split(",");he[0]=e[0],h=he[0],g=`${h}-${h.charAt(0).toUpperCase()+h.slice(1)}`,pe(e),lt()}else pe(t);if(localStorage.getItem("source")){let e=localStorage.getItem("source").split(",");ge[0]=e[0],p=ge[0],fe(e),Se()}else fe(n);localStorage.getItem("saveNameLinks")?(De.nameLinks=localStorage.getItem("saveNameLinks").split(","),De.hrefLinks=localStorage.getItem("saveHrefLinks").split(","),Fe(De),Ne=document.querySelectorAll(".links__item"),Te=document.querySelectorAll(".links__delete")):Fe(c)})),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",l.value),localStorage.setItem("city",I.value),localStorage.setItem("setting",me),localStorage.setItem("lang",he),localStorage.setItem("source",ge),localStorage.setItem("saveNameLinks",De.nameLinks),localStorage.setItem("saveHrefLinks",De.hrefLinks),localStorage.setItem("tag",m.value)})),re.addEventListener("click",ke)})();