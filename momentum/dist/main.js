(()=>{"use strict";const e=[{title:"Aqua Caelestis",src:"src/assets/sounds/Aqua Caelestis.mp3"},{title:"River Flows In You",src:"src/assets/sounds/River Flows In You.mp3"},{title:"Summer Wind",src:"src/assets/sounds/Summer Wind.mp3"},{title:"Ennio Morricone",src:"src/assets/sounds/Ennio Morricone.mp3"}],t=["en"],n=["github"],o=["time","date","greeting-container","qoute-container","weather","player","links"],c={nameLinks:[],hrefLinks:[]},r=document.querySelector(".time"),l=document.querySelector(".date"),s=document.querySelector(".greeting"),a=document.querySelector(".name"),i=document.querySelector("body"),u=document.querySelector(".slide-next"),d=document.querySelector(".slide-prev"),m=document.querySelector(".teg__photos");let h=t[0],g=`${h}-${h.charAt(0).toUpperCase()+h.slice(1)}`,p=n[0],y="",k="";function f(){const e=new Date,t=e.toLocaleTimeString(),n=e.toLocaleDateString(`${g}`,{weekday:"long",month:"long",day:"numeric"});r.textContent=t,l.textContent=n,S(),setTimeout(f,1e3)}function S(){const e=(new Date).getHours();let t="";switch(Math.floor(e/6)){case 1:return t="morning",t;case 2:return t="afternoon",t;case 3:return t="evening",t;case 0:return t="night",t}}function L(){if("en"===h)y="Wind speed: ",k="Humidity: ",s.textContent=`Good ${S()}`,a.placeholder="Enter your name...",m.placeholder="tag search...";else if("ru"===h)switch(y="Скорость ветра: ",k="Влажность: ",a.placeholder="Введите Ваше имя...",m.placeholder="поиск по тегу...",`${S()}`){case"morning":return s.textContent="Доброе утро",s;case"afternoon":return s.textContent="Добрый день",s;case"evening":return s.textContent="Добрый вечер",s;case"night":return s.textContent="Доброй ночи",s}}f(),L();let q=Math.floor(20*Math.random()+1);function C(e){return String(e).length<2?(q=String("0"+e),q):q}function x(e){const t=new Image;if("unsplash"===p)fetch(`https://api.unsplash.com/photos/random?orientation=landscape&query=${e}&client_id=rFNda98nRaQNNJVmFzvMRRIsiJfFl0KTXe4vLdcd-Ik`).then((e=>e.json())).then((e=>{t.src=e.urls.regular,t.onload=()=>{i.style.backgroundImage=`url('${t.src}')`}}));else if("flickr"===p){const n=[];fetch(`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=e75103dd642cdbd338bfce618d58606e&tags=${e}&extras=url_h&format=json&nojsoncallback=1`).then((e=>e.json())).then((e=>{e.photos.photo.forEach((e=>{e.width_h>e.height_h&&""!==e.url_h&&n.push(e.url_h)}));let o=Math.floor(Math.random()*n.length+1);t.src=n[o],t.onload=()=>{i.style.backgroundImage=`url('${t.src}')`}}))}}function v(e,t){const n=new Image;n.src=`https://raw.githubusercontent.com/a-reznikov/stage1-tasks/assets/images/${e}/${t}.jpg`,n.onload=()=>{i.style.backgroundImage=`url('https://raw.githubusercontent.com/a-reznikov/stage1-tasks/assets/images/${e}/${t}.jpg')`}}v(S(),C(q)),u.addEventListener("click",(function(){"github"===p?(q=Number(C(q))+1,q>20&&(q=1),v(S(),C(q))):(Se(),console.log("Source from Api"))})),d.addEventListener("click",(function(){"github"===p?(q=Number(C(q))-1,q<1&&(q=20),v(S(),C(q))):(Se(),console.log("Source from Api"))}));const _=document.querySelector(".weather-icon"),w=document.querySelector(".temperature"),E=document.querySelector(".weather-description"),b=document.querySelector(".wind"),$=document.querySelector(".humidity"),I=document.querySelector(".city");let A="m/s";async function M(){""===I.value&&(I.value="Minsk");const e=`https://api.openweathermap.org/data/2.5/weather?q=${I.value}&lang=${h}&appid=bc50cc0ba8db1784f2c3e644ffa70527&units=metric`,t=await fetch(e),n=await t.json();"404"===n.cod?(_.className="weather-icon owf",_.classList.add("owf-404"),E.textContent="",b.textContent="",$.textContent="","en"===h?w.textContent=`${n.message}`:"ru"===h&&(w.textContent="город не найден")):(_.className="weather-icon owf",_.classList.add(`owf-${n.weather[0].id}`),w.textContent=`${Math.round(n.main.temp)} °C`,E.textContent=n.weather[0].description,b.textContent=`${y}${Math.round(n.wind.speed)} ${A}`,$.textContent=`${k}${n.main.humidity} %`)}document.addEventListener("DOMContentLoaded",M),I.addEventListener("keypress",(function(e){"Enter"===e.code&&M()}));const N=document.querySelector(".quote"),T=document.querySelector(".author"),j=document.querySelector(".change-quote");async function D(){const e=`src/assets/quotes/quotes-${h}.json`,t=await fetch(e),n=await t.json();let o=Math.floor(99*Math.random());"ru"===h&&(o=Math.floor(19*Math.random())),N.textContent=n.quotes[o].quote,T.textContent=n.quotes[o].author}document.addEventListener("DOMContentLoaded",D),j.addEventListener("click",D);const O=document.querySelector(".player"),F=document.querySelector(".volume-line"),G=document.querySelector(".time-line"),R=document.querySelector(".time-progress"),W=document.querySelector(".current-time"),z=document.querySelector(".music-length");let H=document.querySelector(".play-list"),U=!1,X=0;e.forEach((e=>{const t=document.createElement("li"),n=document.createElement("button"),o=document.createElement("span");t.classList.add("play-item"),n.classList.add("play"),n.classList.add("player-icon"),n.classList.add("play-song"),o.classList.add("song-title-list"),o.textContent=e.title,H.append(t),t.append(n),t.append(o)}));const J=document.querySelector(".play"),P=document.querySelector(".play-prev"),Q=document.querySelector(".play-next"),V=document.querySelector(".music-play-now");document.querySelector(".song-title-list");let Y=document.querySelectorAll(".play-item");document.querySelectorAll(".play-song");const K=new Audio;V.textContent="en"===h?"Music dont play now":"Музыка не воспроизводится";let B=0,Z=0;function ee(){V.textContent=e[X].title;const t=Y[Z].querySelector(".play-song");Y[Z].classList.remove("play-item-now"),t.classList.remove("pause"),Y[X].classList.add("play-item-now");const n=Y[X].querySelector(".play-song");!1===U?(K.src=e[X].src,K.currentTime=B,K.play(),n.classList.add("pause"),J.classList.add("pause"),U=!0):(B=K.currentTime,K.pause(),n.classList.remove("pause"),J.classList.remove("pause"),U=!1)}let te=Array.prototype.slice.call(Y);function ne(){Z=X,B=0,X===e.length-1?X=0:X+=1,U=!1,ee()}te.forEach((e=>{e.addEventListener("click",(function(){Z=X,X=te.indexOf(e),Z===X?(B=K.currentTime,ee()):(U=!1,B=0,ee())}))}));const oe=O.querySelector(".volume");function ce(e){let t=Math.floor(e%60);return`${Math.floor(e/60)}:${String(t).padStart(2,0)}`}K.muted=!1,K.volume=.2,J.addEventListener("click",ee),P.addEventListener("click",(function(){Z=X,B=0,0===X?X=e.length-1:X-=1,U=!1,ee()})),Q.addEventListener("click",ne),oe.addEventListener("click",(function(){!1===K.muted?(oe.classList.remove("ico-play"),oe.classList.add("ico-mute"),K.muted=!0):(oe.classList.remove("ico-mute"),oe.classList.add("ico-play"),K.muted=!1)})),F.addEventListener("click",(e=>{!function(e){const t=window.getComputedStyle(F).width,n=e.offsetX/parseInt(t);K.volume=n,O.querySelector(".volume-progress").style.width=100*n+"%"}(e)}),!1),G.addEventListener("click",(e=>{!function(e){const t=window.getComputedStyle(G).width,n=e.offsetX/parseInt(t)*K.duration;K.currentTime=n}(e)}),!1),setInterval((function(){R.style.width=K.currentTime/K.duration*100+"%",W.textContent=ce(K.currentTime),isNaN(K.duration)?z.textContent="0:00":z.textContent=ce(K.duration),K.currentTime===K.duration&&ne()}),250);const re=document.querySelector(".settings__ico"),le=document.querySelector(".settings__container"),se=document.querySelectorAll(".checkbox"),ae=document.querySelectorAll(".checkbox__lang"),ie=document.querySelectorAll(".checkbox__source"),ue=document.querySelectorAll(".options__list"),de=document.querySelectorAll(".setup");let me=[],he=[],ge=[];function pe(e){e.forEach((e=>{ae.forEach((t=>{t.id===e?t.checked="checked":t.checked=!1}))}))}function ye(e){e.forEach((e=>{se.forEach((t=>{t.id===e&&(document.querySelector(`.${t.id}`).style.opacity=1,t.checked="checked",me.push(t.id))}))}))}function ke(){le.classList.toggle("settings__opened")}function fe(e){e.forEach((e=>{ie.forEach((t=>{t.id===e?t.checked="checked":t.checked=!1}))}))}function Se(){"github"===p?(m.value="",v(S(),C(q))):"unsplash"===p?""!==m.value?(x(m.value),console.log("Source unsplash with teg",m.value)):(x(S()),console.log("Source unsplash with timeday")):"flickr"===p&&(""!==m.value?(x(m.value),console.log("Source flickr with teg",m.value)):(x(S()),console.log("Source flickr with timeday")))}ae.forEach((e=>{e.addEventListener("click",(function(){!0===e.checked?(ae.forEach((e=>{e.checked=!1})),e.checked="checked",he[0]=e.id,h=he[0],g=`${h}-${h.charAt(0).toUpperCase()+h.slice(1)}`,it()):e.checked="checked"}))})),de.forEach((e=>{e.addEventListener("click",(function(){de.forEach((e=>{e.classList.remove("selected")})),e.classList.toggle("selected"),ue.forEach((t=>{t.classList.contains(e.id)?t.classList.add("opened"):t.classList.remove("opened")}))}))})),se.forEach((e=>{e.addEventListener("click",(function(){let t=document.querySelector(`.${e.id}`);e.checked?-1===me.indexOf(e.id)&&(me.push(e.id),t.style.opacity=1):-1!==me.indexOf(e.id)&&(me.splice(me.indexOf(e.id),1),t.style.opacity=0)}))})),ie.forEach((e=>{e.addEventListener("click",(function(){!0===e.checked?(ie.forEach((e=>{e.checked=!1})),e.checked="checked",ge[0]=e.id,p=ge[0],Se()):e.checked="checked"}))})),m.addEventListener("keypress",(function(e){"Enter"===e.code&&Se()})),U=!1;const Le=document.querySelector(".search-input"),qe=document.querySelector(".links__title"),Ce=document.querySelector(".links__container"),xe=document.querySelector(".new-links"),ve=document.querySelector(".add-links__container"),_e=document.querySelector(".search-logo"),we=document.querySelector(".chrome_tab"),Ee=document.querySelector(".apps"),be=document.querySelector(".button-back"),$e=document.querySelector(".create__link"),Ie=document.querySelector(".links__list"),Ae=document.querySelector(".input-links-name"),Me=document.querySelector(".input-links-link");let Ne=document.querySelectorAll(".links__item"),Te=document.querySelectorAll(".links__delete"),je=document.querySelectorAll(".links-item-href"),De={nameLinks:[],hrefLinks:[]};function Oe(){Ce.classList.toggle("links__opened"),ve.classList.remove("add-links__opened")}function Fe(){ve.classList.toggle("add-links__opened"),Ae.value="",Me.value=""}function Ge(e){e.nameLinks.forEach((t=>{const n=document.createElement("li"),o=document.createElement("a"),c=document.createElement("div");n.classList.add("links__item"),o.classList.add("links-item-href"),c.classList.add("links__delete"),o.textContent=t,o.href=`${e.hrefLinks[e.nameLinks.indexOf(t)]}`,o.target="_blank",Ie.append(n),n.append(o),n.append(c)}))}Le.addEventListener("keypress",(function(e){"Enter"===e.code&&(_e.classList.contains("yandex")?window.open(`https://yandex.ru/search/?text=${Le.value}`,"_blank"):window.open(`https://www.google.com/search?q=${Le.value}`,"_blank"))})),Ie.addEventListener("click",(function(e){"DIV"===e.target.nodeName&&(e.target.closest("li").remove(),je=document.querySelectorAll(".links-item-href"),De={nameLinks:[],hrefLinks:[]},je.forEach((e=>{De.nameLinks.push(`${e.textContent}`),De.hrefLinks.push(`${e.href}`)})))}));let Re=Array.prototype.slice.call(Te);window.addEventListener("click",(e=>{!function(e){!le.classList.contains("settings__opened")||le.contains(e.target)||re.contains(e.target)||ke(),!Ce.classList.contains("links__opened")||Ce.contains(e.target)||qe.contains(e.target)||(0===Re.length&&Oe(),Te.forEach((t=>{t.contains(e.target)||Oe()})))}(e)}),!1),qe.addEventListener("click",Oe),xe.addEventListener("click",Fe),_e.addEventListener("click",(function(){_e.classList.toggle("yandex")})),we.addEventListener("click",(function(){window.open("https://google.com/","_blank")})),Ee.addEventListener("click",(function(){window.open("https://chrome.google.com/webstore/","_blank")})),be.addEventListener("click",Fe),$e.addEventListener("click",(function(){const e=document.createElement("li"),t=document.createElement("a"),n=document.createElement("div");e.classList.add("links__item"),t.classList.add("links-item-href"),n.classList.add("links__delete"),t.textContent=Ae.value,t.href=`${Me.value}`,t.target="_blank",Ie.append(e),e.append(t),e.append(n),De.nameLinks.push(`${Ae.value}`),De.hrefLinks.push(`${Me.value}`),Te=document.querySelectorAll(".links__delete"),Fe()}));const We=document.querySelector(".setup__general"),ze=document.querySelector(".setup__photos"),He=document.querySelector(".setup__languages"),Ue=document.querySelector(".option_general"),Xe=document.querySelector(".description_general"),Je=document.querySelector(".action_general"),Pe=document.querySelector(".block-time"),Qe=document.querySelector(".block-date"),Ve=document.querySelector(".block-greeting"),Ye=document.querySelector(".block-quote"),Ke=document.querySelector(".block-weather"),Be=document.querySelector(".block-player"),Ze=document.querySelector(".block-links"),et=document.querySelector(".option_photos"),tt=document.querySelector(".description_photos"),nt=document.querySelector(".action_photos"),ot=document.querySelector(".tag__title"),ct=document.querySelector(".option_languages"),rt=document.querySelector(".description_languages"),lt=document.querySelector(".action_languages"),st=document.querySelector(".links__name"),at=document.querySelector(".links__link");function it(){"en"===h?(V.textContent="Music dont play now",qe.textContent="Links",we.textContent="New tab",Ee.textContent="Webstore Chrome",xe.textContent="New Link",$e.textContent="Create",st.textContent="Name",at.textContent="Link",A="m/s","Минск"===I.value&&(I.value="Minsk")):"ru"===h&&(V.textContent="Музыка не воспроизводится",qe.textContent="Ссылки",we.textContent="Новая вкладка",Ee.textContent="Интернет-магазин Chrome",xe.textContent="Новая ссылка",$e.textContent="Создать",st.textContent="Название",at.textContent="Ссылка",A="м/с","Minsk"===I.value&&(I.value="Минск")),L(),M(),f(),D(),"en"===h?(We.textContent="General",ze.textContent="Photos",He.textContent="Languages",Ue.textContent="General",Xe.textContent="Customize your dashboard",Je.textContent="Show:",Pe.textContent="Clock",Qe.textContent="Date",Ve.textContent="Greeting",Ye.textContent="Quotes",Ke.textContent="Weather",Be.textContent="Audio player",Ze.textContent="Links",et.textContent="Photos",tt.textContent="Select a photo source",nt.textContent="Sources:",ot.textContent="Get photos by tag (only in English):",ct.textContent="Languages",rt.textContent="Available languages for the app",lt.textContent="Change:"):"ru"===h&&(We.textContent="Общие",ze.textContent="Фото",He.textContent="Язык",Ue.textContent="Общие",Xe.textContent="Настройте свою информационную панель",Je.textContent="Показать:",Pe.textContent="Часы",Qe.textContent="Дата",Ve.textContent="Приветствие",Ye.textContent="Цитаты",Ke.textContent="Погода",Be.textContent="Аудио плеер",Ze.textContent="Ссылки",et.textContent="Фото",tt.textContent="Выберите источник фотографий",nt.textContent="Источники:",ot.textContent="Фотографий по тегам (только на английском языке):",ct.textContent="Язык",rt.textContent="Доступные языки для приложения",lt.textContent="Изменить:")}window.addEventListener("load",(function(){if(localStorage.getItem("name")&&(a.value=localStorage.getItem("name")),localStorage.getItem("city")&&(I.value=localStorage.getItem("city")),localStorage.getItem("tag")&&(m.value=localStorage.getItem("tag")),localStorage.getItem("setting")?ye(localStorage.getItem("setting").split(",")):ye(o),localStorage.getItem("lang")){let e=localStorage.getItem("lang").split(",");he[0]=e[0],h=he[0],g=`${h}-${h.charAt(0).toUpperCase()+h.slice(1)}`,pe(e),it()}else pe(t);if(localStorage.getItem("source")){let e=localStorage.getItem("source").split(",");ge[0]=e[0],p=ge[0],fe(e),Se()}else fe(n);localStorage.getItem("saveNameLinks")?(De.nameLinks=localStorage.getItem("saveNameLinks").split(","),De.hrefLinks=localStorage.getItem("saveHrefLinks").split(","),Ge(De),Ne=document.querySelectorAll(".links__item"),Te=document.querySelectorAll(".links__delete")):Ge(c)})),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",a.value),localStorage.setItem("city",I.value),localStorage.setItem("setting",me),localStorage.setItem("lang",he),localStorage.setItem("source",ge),localStorage.setItem("saveNameLinks",De.nameLinks),localStorage.setItem("saveHrefLinks",De.hrefLinks),localStorage.setItem("tag",m.value)})),re.addEventListener("click",ke)})();